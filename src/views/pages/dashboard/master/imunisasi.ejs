<div class="page-content">
  <section class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body px-4 py-4-5">
          <form action="" method="GET">
            <div class="row">
              <div class="col-6 mb-3">
                <label class="form-label">Imunisasi</label>
                <select class="form-select" name="nama_imunisasi">
                  <option value="">Semua</option>
                  <option value="Hepatitis B" <%=data.queryParams?.nama_imunisasi=='Hepatitis B' ? 'selected' : '' %>
                    >Hepatitis B</option>
                  <option value="BCG" <%=data.queryParams?.nama_imunisasi=='BCG' ? 'selected' : '' %> >BCG</option>
                  <option value="DPT/DTP" <%=data.queryParams?.nama_imunisasi=='DPT/DTP' ? 'selected' : '' %> >DPT/DTP
                  </option>
                  <option value="HiB" <%=data.queryParams?.nama_imunisasi=='HiB' ? 'selected' : '' %> >HiB</option>
                  <option value="Polio" <%=data.queryParams?.nama_imunisasi=='Polio' ? 'selected' : '' %> >Polio
                  </option>
                  <option value="Campak" <%=data.queryParams?.nama_imunisasi=='Campak' ? 'selected' : '' %> >Campak
                  </option>
                  <option value="MMR" <%=data.queryParams?.nama_imunisasi=='MMR' ? 'selected' : '' %> >MMR</option>
                  <option value="Rotavirus" <%=data.queryParams?.nama_imunisasi=='Rotavirus' ? 'selected' : '' %>
                    >Rotavirus</option>
                  <option value="PCV (Pneumokokus)" <%=data.queryParams?.nama_imunisasi=='PCV (Pneumokokus)'
                    ? 'selected' : '' %> >PCV (Pneumokokus)</option>
                  <option value="Influenza" <%=data.queryParams?.nama_imunisasi=='Influenza' ? 'selected' : '' %>
                    >Influenza</option>
                  <option value="Japanese Ensefalitis" <%=data.queryParams?.nama_imunisasi=='Japanese Ensefalitis'
                    ? 'selected' : '' %> >Japanese Ensefalitis</option>
                </select>
              </div>
              <div class="col-3 mb-3">
                <label class="form-label">Umur (Tahun)</label>
                <select class="form-select" name="year" id="year">
                  <option value="">Semua</option>
                  <option <%=data.queryParams?.year==0 ? 'selected' : '' %> >0</option>
                  <option <%=data.queryParams?.year==1 ? 'selected' : '' %> >1</option>
                  <option <%=data.queryParams?.year==2 ? 'selected' : '' %> >2</option>
                  <option <%=data.queryParams?.year==3 ? 'selected' : '' %> >3</option>
                  <option <%=data.queryParams?.year==4 ? 'selected' : '' %> >4</option>
                  <option <%=data.queryParams?.year==5 ? 'selected' : '' %> >5</option>
                </select>
              </div>
              <div class="col-3 mb-3">
                <label class="form-label">Umur (Bulan)</label>
                <select class="form-select" name="month" id="month">
                  <option value="">Semua</option>
                  <option <%=data.queryParams?.month==0 ? 'selected' : '' %> >0</option>
                  <option <%=data.queryParams?.month==1 ? 'selected' : '' %> >1</option>
                  <option <%=data.queryParams?.month==2 ? 'selected' : '' %> >2</option>
                  <option <%=data.queryParams?.month==3 ? 'selected' : '' %> >3</option>
                  <option <%=data.queryParams?.month==4 ? 'selected' : '' %> >4</option>
                  <option <%=data.queryParams?.month==5 ? 'selected' : '' %> >5</option>
                  <option <%=data.queryParams?.month==6 ? 'selected' : '' %> >6</option>
                  <option <%=data.queryParams?.month==7 ? 'selected' : '' %> >7</option>
                  <option <%=data.queryParams?.month==8 ? 'selected' : '' %> >8</option>
                  <option <%=data.queryParams?.month==9 ? 'selected' : '' %> >9</option>
                  <option <%=data.queryParams?.month==10 ? 'selected' : '' %> >10</option>
                  <option <%=data.queryParams?.month==11 ? 'selected' : '' %> >11</option>
                </select>
              </div>
              <div class="col-12">
                <button type="submit" class="btn btn-primary w-100">
                  <i class="bi bi-filter"></i>
                  Filter
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="col-12">
      <div class="card">
        <div class="card-body px-4 py-4-5">
          <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            <i class="bi bi-plus-square"></i>
            Tambah Data
          </button>
          <a href="/dasbor/master/imunisasi/print/preview" class="btn btn-success mb-3 ms-1">
            <i class="bi bi-printer"></i>
            Print
          </a>
          <div class="modal modal-lg fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false"
            tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="staticBackdropLabel">Tambah Informasi Imunisasi</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form action="/dasbor/master/imunisasi" method="post">
                  <div class="modal-body">
                    <div class="form-group">
                      <label for="toddlerId">Pilih balita</label>
                      <select class="form-select" name="toddlerId" id="toddlerId">
                        <option value="" hidden>-Pilih-</option>
                        <% data.balita.forEach(e=> { %>
                          <option value="<%= e.id %>" <%=oldData[0]?.toddlerId==e.id ? 'selected' : '' %> ><%= e.nama %>
                          </option>
                          <% }); %>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="nama_imunisasi">Imunisasi</label>
                      <select class="form-select" name="nama_imunisasi" id="nama_imunisasi">
                        <option value="" hidden>Pilih Imunisasi</option>
                        <option value="Hepatitis B" <%=oldData[0]?.nama_imunisasi=='Hepatitis B' ? 'selected' : '' %>
                          >Hepatitis B</option>
                        <option value="BCG" <%=oldData[0]?.nama_imunisasi=='BCG' ? 'selected' : '' %> >BCG</option>
                        <option value="DPT/DTP" <%=oldData[0]?.nama_imunisasi=='DPT/DTP' ? 'selected' : '' %> >DPT/DTP
                        </option>
                        <option value="HiB" <%=oldData[0]?.nama_imunisasi=='HiB' ? 'selected' : '' %> >HiB</option>
                        <option value="Polio" <%=oldData[0]?.nama_imunisasi=='Polio' ? 'selected' : '' %> >Polio
                        </option>
                        <option value="Campak" <%=oldData[0]?.nama_imunisasi=='Campak' ? 'selected' : '' %> >Campak
                        </option>
                        <option value="MMR" <%=oldData[0]?.nama_imunisasi=='MMR' ? 'selected' : '' %> >MMR</option>
                        <option value="Rotavirus" <%=oldData[0]?.nama_imunisasi=='Rotavirus' ? 'selected' : '' %>
                          >Rotavirus</option>
                        <option value="PCV (Pneumokokus)" <%=oldData[0]?.nama_imunisasi=='PCV (Pneumokokus)'
                          ? 'selected' : '' %> >PCV (Pneumokokus)</option>
                        <option value="Influenza" <%=oldData[0]?.nama_imunisasi=='Influenza' ? 'selected' : '' %>
                          >Influenza</option>
                        <option value="Japanese Ensefalitis" <%=oldData[0]?.nama_imunisasi=='Japanese Ensefalitis'
                          ? 'selected' : '' %> >Japanese Ensefalitis</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="tanggal">Tanggal Imunisasi</label>
                      <input type="date" class="form-control" name="tanggal" id="tanggal" value="<%= oldData[0]?.tanggal %>" />
                    </div>
                    <div class="row mb-3">
                      <div class="col-4">
                        <label class="form-label">Umur</label>
                        <div class="row">
                          <div class="col-6">
                            <select class="form-select" name="tahun" id="tahun">
                              <option value="" hidden>Tahun..</option>
                              <option>0</option>
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                            </select>
                          </div>
                          <div class="col-6">
                            <select class="form-select" name="bulan" id="bulan">
                              <option value="" hidden>Bulan..</option>
                              <option>0</option>
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                              <option>6</option>
                              <option>7</option>
                              <option>8</option>
                              <option>9</option>
                              <option>10</option>
                              <option>11</option>
                            </select>
                          </div>
                        </div>
                      </div>
                      <div class="col-4">
                        <label for="berat_badan" class="form-label">Berat Badan (BB)</label>
                        <input type="number" step="0.1" class="form-control" name="berat_badan" id="berat_badan"
                          placeholder="kg (1 desimal)" value="<%= oldData[0]?.berat_badan %>">
                      </div>
                      <div class="col-4">
                        <label for="tinggi_badan" class="form-label">Tinggi Badan (TB)</label>
                        <input type="number" step="0.1" class="form-control" name="tinggi_badan" id="tinggi_badan"
                          placeholder="cm (1 desimal)" value="<%= oldData[0]?.tinggi_badan %>">
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Simpan</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <table class="table table-striped" id="tabel-balita">
            <thead>
              <tr>
                <th>Nama</th>
                <th>Nama Imunisasi</th>
                <th>Umur</th>
                <th>Berat Badan</th>
                <th>Tinggi Badan</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody>
              <% data.imunisasi.forEach(e=> { %>
                <tr>
                  <td>
                    <%= e.toddler.nama %>
                  </td>
                  <td>
                    <%= e.nama_imunisasi %>
                  </td>
                  <td>
                    <%= Math.floor(+e.umur / 12) %> tahun <%= +e.umur % 12 %> bulan
                  </td>
                  <td>
                    <%= e.berat_badan %> kg
                  </td>
                  <td>
                    <%= e.tinggi_badan %> cm
                  </td>
                  <td style="white-space: nowrap;">
                    <a href="/dasbor/master/imunisasi/<%= e.uuid %>" class="badge bg-primary">
                      <i class="bi bi-list-ul"></i>
                      Detail
                    </a>
                  </td>
                </tr>
                <% }); %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>